<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>치아 연대기 v6.0.0</title>
    <link rel="stylesheet" href="style.css?v=6.0.0">
</head>
<body>
    <div id="game-container">
        <nav id="top-nav">
            <button onclick="switchView('mine')" id="tab-mine" class="active">⛏️ 채굴/합성</button>
            <button onclick="switchView('refine')" id="tab-refine">🔥 Top8 제련</button>
            <button onclick="switchView('war')" id="tab-war">⚔️ 던전원정</button>
        </nav>

        <header>
            <div class="stats-bar">
                <span>💰 <span id="gold-display">0</span></span>
                <div class="control-group">
                    <button id="sound-btn" onclick="toggleSound()" class="btn-toggle" style="background:#f1c40f; color:black;">🔊 ON</button>
                    <button id="mine-toggle-btn" onclick="toggleMining()" class="btn-toggle" style="background:#e74c3c; color:white;">⏸️ 정지</button>
                </div>
            </div>
        </header>

        <main id="main-content">
            <div id="mine-view">
                <div id="mine-rock-area">
                    <div id="giant-tooth">🦷</div>
                    <div id="miner-char">⛏️</div>
                </div>
                <div id="pickaxe-info">
                    <div id="pickaxe-name">허름한 나무 곡괭이</div>
                    <div class="progress-wrapper">
                        <span class="progress-label">자동채굴</span>
                        <div class="progress-container"><div id="mine-bar"></div></div>
                    </div>
                    <div class="progress-wrapper">
                        <span class="progress-label">자동합성</span>
                        <div class="progress-container"><div id="merge-bar"></div></div>
                    </div>
                </div>
            </div>

            <div id="inventory-section">
                <div id="action-bar">
                    <button onclick="sortInventory()" class="btn-red">🔄 자동 정렬</button>
                    <button onclick="openShop()" class="btn-gold">💎 Upgrade Lab</button>
                </div>
                <div id="inventory-scroll-area">
                    <div id="inventory-grid"></div>
                </div>
                <div id="cheat-section">
                    <div class="cheat-group-left">
                        <input type="text" id="coupon-input" placeholder="쿠폰 입력">
                        <button onclick="checkCoupon()" class="btn-sm" style="background:var(--gold); color:black;">확인</button>
                    </div>
                    <div class="cheat-group-right">
                        <button onclick="saveGame(); alert('저장완료');" class="btn-sm" style="background:#555;">저장</button>
                        <button onclick="importSave()" class="btn-sm" style="background:#555;">로드</button>
                        <button onclick="openGuide()" class="btn-sm" style="background:#3498db; font-weight:bold;">📘설명</button>
                    </div>
                </div>
            </div>

            <div id="refine-view" style="display:none;">
                <div class="refine-grid" id="refine-grid"></div>
            </div>

            <div id="war-view" style="display:none;">
                <div id="mercenary-camp">
                    <h4 style="color:var(--gold); margin:0 0 10px 5px;">🏰 용병 모집소</h4>
                    <div id="mercenary-list"></div>
                </div>
                <div id="dungeon-list-container">
                    <div id="dungeon-list"></div>
                </div>
            </div>
        </main>
    </div>

    <div id="battle-screen">
        <div id="battle-camera">
            <div id="battle-world"></div>
        </div>
        
        <div id="battle-ui-layer">
            <div id="battle-header">
                <span id="current-dungeon-name">던전 이름</span><br>
                <span id="wave-info">WAVE 1/5</span>
            </div>
            <button onclick="exitDungeon()" class="btn-exit">후퇴</button>
            <div id="war-weapon-slots"></div>
            <div id="joystick-zone">
                <div id="joystick-knob"></div>
            </div>
        </div>
    </div>

    <div id="dungeon-result-modal">
        <div id="result-content">
            <h2 id="result-title" style="color:var(--gold);">CLEAR!</h2>
            <p id="result-desc">다음 던전이 오픈되었습니다.</p>
            <button onclick="closeResultModal()" class="btn-gold" style="margin-top:20px;">확인</button>
        </div>
    </div>

    <div id="guide-modal" style="display:none;">
        <div id="guide-content">
            <h2 style="color:var(--gold); margin-top:0;">📘 치아 연대기 가이드</h2>
            <div class="guide-scroll">
                <h3>1. ⚡ 빠른 조작 꿀팁</h3>
                <p>👉 <b>더블 탭:</b> 인벤토리의 치아를 빠르게 두 번 누르면, 같은 레벨의 모든 치아가 한 번에 합성됩니다.</p>
                <p>👉 <b>다중 터치:</b> 손가락 2~3개로 광석을 동시에 두드리면 채굴 속도가 훨씬 빨라집니다!</p>
                
                <h3>2. ⚔️ 전투와 인벤토리</h3>
                <p>🏰 <b>Top 8 (상단 빨간 테두리):</b> 이곳은 전투에 나갈 <b>최정예 치아</b>를 두는 곳입니다.</p>
                <p>🚫 <b>보호 구역:</b> Top 8 칸은 실수를 막기 위해 <b>자동 합성이나 더블 탭 합성이 되지 않습니다.</b> 수동으로 관리해주세요.</p>
                <p>🔫 <b>릴레이 전투:</b> 1번부터 8번 슬롯까지 순서대로 공격합니다. 중간에 <b>빈칸</b>이 있으면 턴을 넘기며 시간을 낭비하니 꽉 채우세요!</p>
                
                <h3>3. 💎 업그레이드</h3>
                <p>🍀 <b>곡괭이:</b> 상위 레벨 치아를 얻을 <b>행운</b>이 증가합니다.</p>
                <p>🔥 <b>제련:</b> 던전을 클리어할 때마다 강화 슬롯이 하나씩 열립니다.</p>
                <p>🧹 <b>자동 청소:</b> 던전 레벨이 오르면, 더 이상 필요 없는 하위 치아는 자동으로 삭제됩니다.</p>
            </div>
            <button onclick="closeGuide()" class="btn-red" style="width:100%; margin-top:15px;">닫기</button>
        </div>
    </div>

    <div id="drag-proxy"></div>
    <div id="shop-modal"><div id="shop-content"></div></div>

    <script src="data.js?v=6.0.0"></script>
    <script src="battle.js?v=6.0.0"></script>
    <script src="script.js?v=6.0.0"></script>
</body>
</html>
