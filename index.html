<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>치아 연대기 v3.2.0</title>
    <link rel="stylesheet" href="style.css?v=3.2.0">
</head>
<body>
    <div id="game-container">
        <nav id="top-nav">
            <button onclick="switchView('mine')" id="tab-mine" class="active">⛏️ 채굴/합성</button>
            <button onclick="switchView('refine')" id="tab-refine">🔥 Top8 제련</button>
            <button onclick="switchView('war')" id="tab-war">⚔️ 던전원정</button>
        </nav>

        <header>
            <div class="stats-bar">
                <span>💰 <span id="gold-display">0</span></span>
                <div class="control-group">
                    <button id="sound-btn" onclick="toggleSound()" class="btn-toggle" style="background:#f1c40f; color:black;">🔊 ON</button>
                    <button id="mine-toggle-btn" onclick="toggleMining()" class="btn-toggle" style="background:#e74c3c; color:white;">⏸️ 정지</button>
                </div>
            </div>
        </header>

        <main id="main-content">
            <div id="mine-view">
                <div id="mine-rock-area">
                    <div id="giant-tooth">🦷</div>
                    <div id="miner-char">⛏️</div>
                </div>
                <div id="pickaxe-info">
                    <div id="pickaxe-name">허름한 나무 곡괭이</div>
                    <div class="progress-wrapper">
                        <span class="progress-label">자동채굴</span>
                        <div class="progress-container"><div id="mine-bar"></div></div>
                    </div>
                    <div class="progress-wrapper">
                        <span class="progress-label">자동합성</span>
                        <div class="progress-container"><div id="merge-bar"></div></div>
                    </div>
                </div>
            </div>

            <div id="inventory-section">
                <div id="action-bar">
                    <button onclick="sortInventory()" class="btn-red">🔄 자동 정렬</button>
                    <button onclick="openShop()" class="btn-gold">💎 Upgrade Lab</button>
                </div>
                <div id="inventory-scroll-area">
                    <div id="inventory-grid"></div>
                </div>
                <div id="cheat-section">
                    <div class="cheat-group-left">
                        <input type="text" id="coupon-input" placeholder="쿠폰 입력">
                        <button onclick="checkCoupon()" class="btn-sm" style="background:var(--gold); color:black;">확인</button>
                    </div>
                    <div class="cheat-group-right">
                        <button onclick="exportSave()" class="btn-sm" style="background:#555;">저장</button>
                        <button onclick="importSave()" class="btn-sm" style="background:#555;">로드</button>
                    </div>
                </div>
            </div>

            <div id="refine-view">
                <h4 style="color:var(--gold); text-align:center; margin:10px 0;">🔥 Top 8 슬롯 고급 제련</h4>
                <div class="refine-grid" id="refine-grid"></div>
            </div>

            <div id="war-view" style="display:none;">
                <div id="mercenary-camp">
                    <h4 style="color:var(--gold); margin:0 0 10px 5px;">🏰 용병 모집소</h4>
                    <div id="mercenary-list"></div>
                </div>
                <div id="dungeon-list-container">
                    <div id="dungeon-list"></div>
                </div>
            </div>
        </main>
    </div>

    <div id="battle-screen">
        <div id="battle-camera">
            <div id="battle-world">
                </div>
        </div>
        
        <div id="battle-ui-layer">
            <div id="battle-header">
                <span id="current-dungeon-name">던전 이름</span><br>
                <span id="wave-info">WAVE 1/5</span>
            </div>
            <button onclick="exitDungeon()" class="btn-exit">후퇴</button>
            <div id="war-weapon-slots"></div>
            <div id="joystick-zone">
                <div id="joystick-knob"></div>
            </div>
        </div>
    </div>

    <div id="dungeon-result-modal">
        <div id="result-content">
            <h2 id="result-title" style="color:var(--gold);">CLEAR!</h2>
            <p id="result-desc">다음 던전이 오픈되었습니다.</p>
            <button onclick="closeResultModal()" class="btn-gold" style="margin-top:20px;">확인</button>
        </div>
    </div>

    <div id="drag-proxy"></div>
    <div id="shop-modal"><div id="shop-content"></div></div>

    <script src="data.js?v=3.2.0"></script>
    <script src="battle.js?v=3.2.0"></script>
    <script src="script.js?v=3.2.0"></script>
</body>
</html>
