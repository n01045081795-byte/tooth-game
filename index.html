<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì¹˜ì•„ í‚¤ìš°ê¸° (Tooth Idle)</title>
    <style>
        body { background: #2c3e50; color: white; text-align: center; font-family: sans-serif; }
        #game-container { max-width: 500px; margin: auto; }
        .stats { background: #34495e; padding: 10px; border-radius: 10px; margin-bottom: 10px; }
        #inventory { 
            display: grid; 
            grid-template-columns: repeat(8, 1fr); 
            gap: 5px; background: #7f8c8d; padding: 10px; border-radius: 5px;
        }
        .slot { 
            width: 100%; aspect-ratio: 1; background: #95a5a6; 
            border: 1px solid #7f8c8d; display: flex; align-items: center; 
            justify-content: center; font-size: 12px; cursor: pointer; border-radius: 3px;
        }
        .slot:hover { background: #bdc3c7; }
        button { padding: 10px 20px; margin-top: 10px; cursor: pointer; font-weight: bold; }
        .log { margin-top: 15px; font-size: 14px; color: #f1c40f; min-height: 20px; }
    </style>
</head>
<body>

<div id-container>
    <h1>ğŸ¦· ì¹˜ì•„ í‚¤ìš°ê¸°</h1>
    <div class="stats">
        ê³¨ë“œ: <span id="gold">0</span> | ë£¨ë¹„: <span id="ruby">0</span><br>
        ì¹¸ ìˆ˜: <span id="slot-count">24</span> / 32
    </div>
    
    <div id="inventory"></div>

    <div class="log" id="log-msg"></div>

    <button onclick="buyTooth()">ì¹˜ì•„ êµ¬ë§¤ (100ê³¨ë“œ)</button>
    <button onclick="expandInventory()" id="expand-btn">ì¸ë²¤í† ë¦¬ í™•ì¥ (5000ê³¨ë“œ)</button>
</div>

<script>
    let gold = 1000;
    let ruby = 0;
    let slots = 24;
    let inventory = new Array(32).fill(0); // 0ì€ ë¹ˆì¹¸, ìˆ«ìëŠ” ì¹˜ì•„ ë‹¨ê³„

    // í™”ë©´ ì—…ë°ì´íŠ¸
    function updateUI() {
        document.getElementById('gold').innerText = gold;
        document.getElementById('ruby').innerText = ruby;
        document.getElementById('slot-count').innerText = slots;
        
        const invDiv = document.getElementById('inventory');
        invDiv.innerHTML = '';
        invDiv.style.gridTemplateRows = `repeat(${slots/8}, 1fr)`;

        for(let i=0; i<slots; i++) {
            const div = document.createElement('div');
            div.className = 'slot';
            div.innerText = inventory[i] > 0 ? 'LV' + inventory[i] : '';
            div.onclick = () => combine(i);
            invDiv.appendChild(div);
        }
    }

    // ì¹˜ì•„ êµ¬ë§¤
    function buyTooth() {
        if(gold >= 100) {
            let emptyIdx = inventory.indexOf(0);
            if(emptyIdx !== -1 && emptyIdx < slots) {
                gold -= 100;
                inventory[emptyIdx] = 1;
                updateUI();
            } else {
                showLog("ì¸ë²¤í† ë¦¬ê°€ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤!");
            }
        }
    }

    // ì¸ë²¤í† ë¦¬ í™•ì¥
    function expandInventory() {
        if(slots < 32 && gold >= 5000) {
            gold -= 5000;
            slots = 32;
            document.getElementById('expand-btn').style.display = 'none';
            updateUI();
            showLog("ì¸ë²¤í† ë¦¬ê°€ 32ì¹¸ìœ¼ë¡œ í™•ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        }
    }

    // í•©ì„± ë¡œì§ (ë„ë°•ì„± í¬í•¨)
    function combine(idx) {
        let currentLv = inventory[idx];
        if(currentLv === 0 || currentLv >= 20) return;

        // ê°™ì€ ë ˆë²¨ì˜ ë‹¤ë¥¸ ì¹˜ì•„ ì°¾ê¸°
        for(let i=0; i<slots; i++) {
            if(i !== idx && inventory[i] === currentLv) {
                inventory[i] = 0; // ì¬ë£Œ í•˜ë‚˜ ì‚­ì œ
                
                // ëŒ€ì„±ê³µ í™•ë¥  íŒì • (5%)
                let isGreat = Math.random() < 0.05;
                if(isGreat && currentLv <= 18) {
                    inventory[idx] = currentLv + 2;
                    showLog(`âœ¨ ëŒ€ì„±ê³µ! LV${currentLv+2}ë¡œ 2ë‹¨ê³„ ì í”„!`);
                } else {
                    inventory[idx] = currentLv + 1;
                    showLog(`í•©ì„± ì„±ê³µ: LV${currentLv+1}`);
                }
                
                gold += currentLv * 10; // í•©ì„± ì‹œ ë³´ë„ˆìŠ¤ ê³¨ë“œ
                updateUI();
                return;
            }
        }
        showLog("í•©ì„±í•  ê°™ì€ ë ˆë²¨ì˜ ì¹˜ì•„ê°€ ì—†ìŠµë‹ˆë‹¤.");
    }

    function showLog(msg) {
        document.getElementById('log-msg').innerText = msg;
    }

    updateUI();
</script>
</body>
</html>
